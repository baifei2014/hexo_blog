---
layout: post
title: B树
date: 2019-07-12 18:27:53
tags: [B-树, B+树]
---
## B-树
B-树是一种适用于外查找的平衡多叉树，磁盘管理系统中的目录管理，数据库中的索引多数都采用B-树这种数据结构。
### B-树的定义
一颗m阶的B-树或为空树，或为满足下列特性的m叉树：
- 树中每个节点至多有m颗子树；
- 若根节点不是叶子节点，则至少有两颗子树；
- 除根之外的所有非终端节点至少有m/2颗子树；
- 所有叶子节点都出现在同一层次上，并且不带信息，通常称为失败节点(失败节点并不存在，指向这些节点的指针为空。引入失败节点是为了便于分析B-树的查找性能)；
- 所有的非终端节点最多有m-1个关键字，节点结构如下图所示。
![B-树节点结构](https://jlh-1255362804.cos.ap-beijing.myqcloud.com/artical/B%E6%A0%91/20190713-btree-ex2.jpg)
其中，Ki(i=1,...n)为关键字，且Ki<Ki+1(i=1,...,n-1)；Pi(i=0,...,n)为指向子树根节点的指针，且指针Pi-1所指子树中所有节点的关键字均小于等于Ki(i=1,...,n)，Pn所指子树中所有节点的关键字均大于Kn，n(m/2-1<=n<=m-1)为关键字的个数(或n+1为子树个数)。
B-树具有平衡，有序，多路的特点，下图展示的是一棵4阶的B-树。
![4阶B-树](https://jlh-1255362804.cos.ap-beijing.myqcloud.com/artical/B%E6%A0%91/20190712-btree-ex1.jpg)
观察这个数，可以发现：
- 所有叶子节点均在同一层次，这体现出平衡的特点。
- 树中每个节点都是有序的，且关键字Ki“左子树”中关键字均小于Ki，而其“右子树”中的关键字均大于Ki，这体现出其有序的特点。
- 除叶子节点外，有的节点中有一个关键字，两棵子树，有的节点中有两个关键字，三颗子树，这种4阶的B-树最多有三个关键字，四棵子树，这体现出多路的特点。

## B+树
B+树是B-树的变形树，更适合用于文件索引系统。

## B+树和B-树的差异
一棵m阶的B+树和m阶B-树的差异在于：
- 有n棵子树的节点中含有n个关键字；
- 所有的叶子节点中包含了全部关键字信息，以及指向含这些关键字记录的指针，且叶子节点本身依关键字的大小自小而大顺序连接；
- 所有的非终端节点可以看成是索引部分，节点中仅含有其子树(根节点)中的最大(或最小关键字)关键字。
